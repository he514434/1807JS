<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			*{margin: 0;padding: 0;}
			.cont{width: 300px;height: 400px;border: solid 1px black;margin: 40px auto;}
			.msg{height: 300px;overflow: auto;}
			.msg div{max-width: 260px;padding: 6px;border-radius: 6px;margin: 6px;clear: both;}
			.msg div:nth-child(2n){float: left;background: limegreen;}
			.msg div:nth-child(2n-1){float: right;background: dodgerblue;}
			
			.ctrl{height: 100px;border-top: solid 1px black;box-sizing: border-box;}
			.ctrl *{height: 99px;border: none;background: none;float: left;}
			#txt{width: 239px;border-right: solid 1px black;resize: none;}
			#btn{background: #ccc;width: 60px;}
		</style>
	</head>
	<body>
		<div class="cont">
			<div class="msg"></div>
			<div class="ctrl">
				<textarea name="" rows="" cols="" id="txt"></textarea>
				<input type="button" name="" id="btn" value="发送" />
			</div>
		</div>
	</body>
	<script type="text/javascript">
		var otxt = document.getElementById("txt")
		var obtn = document.getElementById("btn")
		var omsg = document.querySelector(".msg")
		
		var sum = 0;
		
		obtn.onclick = function(){
			send()
		}
		
		otxt.onkeydown = function(eve){
			var e = eve || window.event
//			if(e.keyCode == 13){
//				send()
//			}
			
			if(e.keyCode == 13 && e.ctrlKey){
				send()
			}
			
		}
		
		function send(){
			var div = document.createElement("div")
			div.innerHTML = otxt.value;
			omsg.appendChild(div)
			sum += div.offsetHeight + 12;
			omsg.scrollTop = sum;
			otxt.value = "";
			otxt.blur()
		}
		
	</script>
</html>
