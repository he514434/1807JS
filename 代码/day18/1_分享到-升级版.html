<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			*{margin: 0;padding: 0;}
			#box{width: 200px;height: 300px;background: #ccc;position: absolute;left: -200px;top: 100px;}
			#box span{position: absolute;right: -20px;top: 120px;height: 60px;width: 20px;text-align: center;line-height: 20px;background: #f00;}
		</style>
	</head>
	<body>
		<div id="box">
			<ul>
				<li>link1</li>
				<li>link1</li>
				<li>link1</li>
				<li>link1</li>
			</ul>
			<span>分享到</span>
		</div>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
		<h1>一级标题</h1>
	</body>
	<script type="text/javascript">
		var obox = document.getElementById("box");
		var t = obox.offsetTop;
		
		var timer = null;
		
		obox.onmouseover = function(){
			moveL(0)
		}
		obox.onmouseout = function(){
			moveL(-200)
		}
		
		onscroll = function(){
			var scrollT = document.documentElement.scrollTop;
//			计算滚动页面的时候,obox的实时目标：
//			因为position:absolute的相对位置是跟元素的最上方，页面滚动会被带上去，需要将初始的top值加上当前滚动的距离
			var target = t + scrollT;
			moveT(target);
		}
		
		function moveL(target){
			clearInterval(timer);
			timer = setInterval(function(){
				var speed = (target - obox.offsetLeft)/7;
				speed = speed<0 ? Math.floor(speed) : Math.ceil(speed);
				
				if(target == obox.offsetLeft){
					clearInterval(timer);
				}else{
					obox.style.left = obox.offsetLeft + speed + "px";
				}
				
			},30)
		}
		
		function moveT(target){
			clearInterval(timer);
			timer = setInterval(function(){
				var speed = (target - obox.offsetTop)/7;
				speed = speed<0 ? Math.floor(speed) : Math.ceil(speed);
				
				if(target == obox.offsetTop){
					clearInterval(timer);
				}else{
					obox.style.top = obox.offsetTop + speed + "px";
				}
				
			},30)
		}
		
	</script>
</html>
